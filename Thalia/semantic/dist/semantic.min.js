$(document).ready(function(){
   

    $("#searchBTN").on("click", function(){
        firstApi();
    })

    $("a").click(function() { window.open($(this).href); return false; })
 
    function firstApi(){
        var jobTitle = $("#jobTitel").val();
        var location = $("#location").val();
        var queryURL1 = "https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json?description=" + jobTitle + "&location=" + location;
        $.get(queryURL1).then(function(response){
            if(response.length == 0){

            }
            else{
                secondApi();
                for(var i = 0; i<response.length; i++){
                    $("#results").append($("<tr>").addClass("collapsible").append(($)("<img>").attr("src",response[i].company_logo )).append("   " + response[i].title + " - " + response[i].location).append($("<tr>").addClass("content").append(response[i].description)).append($("<a> Apply </a>").addClass("button").attr("href", response[i].url)));
                }
            }
            

        })
       
    }

    function secondApi(){
        var queryURL2 = "https://api.nytimes.com/svc/search/v2/articlesearch.json?q=javascipt&fq=Technology&api-key=aiYHThXbjrJO5XKf0V2RMyi2CgGGDkzA";
        
        $.get(queryURL2).then(function(response){
            console.log(response);
            for(var i = 0; i<5; i++){
                $("#articles").append($("<tr>").addClass("articlesLayout").append(response.response.docs[i].headline.main).append($("<tr>").addClass("snippet").append(response.response.docs[i].snippet)).append($("<a> Read Article </a>").addClass("button2").attr("href", response.response.docs[i].web_url)));
            }

        })

    }
        
});